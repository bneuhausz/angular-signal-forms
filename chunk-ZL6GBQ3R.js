import{f as w,g as D}from"./chunk-72NYO35O.js";import{c as g,i as y,l as b,m as E,n as _,q as A,r as S,s as h,t as I,u as q,v as k}from"./chunk-CWKN4B47.js";import"./chunk-WHQ6ER5U.js";import{Hb as u,Oa as i,Vb as m,Wb as p,bb as N,c as x,fc as F,na as M,ob as l,pb as s,rb as d,sb as c,wb as C,xb as o,yb as a,zb as f}from"./chunk-5H3WDF26.js";function L(t,r){if(t&1&&(o(0,"mat-error"),m(1),a()),t&2){let e=u();i(),p(e.f.firstName().errors()[0].message)}}function P(t,r){if(t&1&&(o(0,"mat-error"),m(1),a()),t&2){let e=u();i(),p(e.f.lastName().errors()[0].message)}}var v=class t{f=g(M({firstName:"",lastName:""}),r=>{E(r.firstName,{request:({value:e})=>e()?`http://localhost:3000/api/validate/first-name/${e()}`:void 0,onSuccess(e){return e.valid?null:[y({kind:"notUnique",message:"First name is not unique"})]},onError(e){console.error("Async validation error:",e)}}),b(r.lastName,{params:({value:e})=>e(),factory:e=>F({params:()=>e(),loader:W=>x(null,[W],function*({params:n}){return n?(yield fetch(`http://localhost:3000/api/validate/last-name/${n}`)).json():void 0})}),onSuccess(e){return e.valid?null:[y({kind:"notUnique",message:"Last name is not unique"})]},onError(e){console.error("Async validation error:",e)}})});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=N({type:t,selectors:[["app-async-form"]],decls:13,vars:7,consts:[["matInput","",3,"field"],["mat-button","","type","button",3,"disabled"]],template:function(e,n){e&1&&(o(0,"form")(1,"mat-form-field")(2,"mat-label"),m(3,"First Name"),a(),f(4,"input",0),l(),d(5,L,2,1,"mat-error"),a(),o(6,"mat-form-field")(7,"mat-label"),m(8,"Last Name"),a(),f(9,"input",0),l(),d(10,P,2,1,"mat-error"),a(),o(11,"button",1),m(12,"Submit"),a()()),e&2&&(i(4),s(n.f.firstName),i(),c(n.f.firstName().invalid()?5:-1),i(4),s(n.f.lastName),i(),c(n.f.lastName().invalid()?10:-1),i(),C("disabled",n.f().invalid()))},dependencies:[I,h,A,S,k,q,D,w,_],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin-top:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})};export{v as default};
