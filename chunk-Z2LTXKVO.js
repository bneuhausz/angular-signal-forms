import{e as k,f as w}from"./chunk-NYJ34EZV.js";import{c as C,i as g,n as b,o as E,q as _,r as A,s as S,t as h,u as I,v as q}from"./chunk-GESU7DXU.js";import"./chunk-JLHBAMH3.js";import{Fb as u,Na as i,Tb as m,Ub as y,Xa as s,Ya as d,bb as M,c as F,ec as N,na as x,pb as c,qb as f,ub as l,vb as o,wb as a,xb as p}from"./chunk-RNEDUF4S.js";function D(t,r){if(t&1&&(o(0,"mat-error"),m(1),a()),t&2){let e=u();i(),y(e.f.firstName().errors()[0].message)}}function L(t,r){if(t&1&&(o(0,"mat-error"),m(1),a()),t&2){let e=u();i(),y(e.f.lastName().errors()[0].message)}}var v=class t{f=C(x({firstName:"",lastName:""}),r=>{E(r.firstName,{request:({value:e})=>e()?`http://localhost:3000/api/validate/first-name/${e()}`:void 0,onSuccess(e){return e.valid?null:[{kind:"notUnique",message:"First name is not unique"}]},onError(e){console.error("Async validation error:",e)}}),b(r.lastName,{params:({value:e})=>e(),factory:e=>N({params:()=>e(),loader:V=>F(null,[V],function*({params:n}){return n?(yield fetch(`http://localhost:3000/api/validate/last-name/${n}`)).json():void 0})}),onSuccess(e){return e.valid?null:[{kind:"notUnique",message:"Last name is not unique"}]},onError(e){console.error("Async validation error:",e)}})});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-async-form"]],decls:13,vars:5,consts:[["matInput","",3,"formField"],["mat-button","","type","button",3,"disabled"]],template:function(e,n){e&1&&(o(0,"form")(1,"mat-form-field")(2,"mat-label"),m(3,"First Name"),a(),p(4,"input",0),s(),c(5,D,2,1,"mat-error"),a(),o(6,"mat-form-field")(7,"mat-label"),m(8,"Last Name"),a(),p(9,"input",0),s(),c(10,L,2,1,"mat-error"),a(),o(11,"button",1),m(12,"Submit"),a()()),e&2&&(i(4),l("formField",n.f.firstName),d(),i(),f(n.f.firstName().invalid()?5:-1),i(4),l("formField",n.f.lastName),d(),i(),f(n.f.lastName().invalid()?10:-1),i(),l("disabled",n.f().invalid()))},dependencies:[h,S,_,A,q,I,w,k,g],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin-top:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})};export{v as default};
